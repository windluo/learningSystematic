## 第3章  基本概念

包含以下四点：

> 1、语法
>
> 2、数据类型
>
> 3、流控制语句
>
> 4、函数

### 3.1、语法

#### 3.1.1 区分大小写

ECMAScript 的一切（变量、函数名和操作符）都区分大小写

```tex
1、变量名 test 和 变量名 Test 表示两个不同的变量
2、关键字 typeof 不能作为变量名，但是 Typeof 就可以
```

#### 3.1.2 标识符

标识符指的是变量、函数、属性的名字、或者函数的参数

```
第一个字符必须是字母、下划线（_）或美元符号（$）
后面的其他字符可以是字母、下划线、符号或数字
```

按照惯例，也为了与 ECMAScript 内置的函数、对象命名格式保持一致，标识符命名采用 **驼峰大小写格式**，即首字母大写，后面的每个单词的首字母大写

> **注意：** 关键字、保留字、true、false、null 不能用作标识符

#### 3.1.3 注释

只有两种：单行和多行注释

```javascript
// 单行注释
/*
* 多行
* 注释
*/
```

多行注释以 /\* 开头，以 \*/ 结尾

#### 3.1.4 严格模式

为了不破坏 ES3 语法而特意选定的语法。

ES5 引入了严格模式（strict mode）概念，是一个编译指示，用于告诉 JavaScript 引擎开启严格模式。启用严格模式：

```javascript
"use strict";
```

#### 3.1.5 语句

ECMAScript 中的语句以一个分号结尾，如果省略分号，则由解析器确定语句的结尾。

代码块以 大括号（{}） 闭合



### 3.2 关键字和保留字

用于表示控制语句的开始或结束，或者用于执行特定操作等。关键字和保留字不可用作标识符。

同时还要避免使用 JavaScript 的对象、属性、方法作为标识符。



### 3.3 变量

ECMAScript 的变量是松散类型的，所谓松散类型即可以用来保存任何类型的数据。

定义变量用操作符（var、let、const等）。有操作符的变量 是其作用域下的局部变量，无操作符的变量会被提升为全局变量

```
ES5 的全局变量都会挂在全局对象（window）上，但是 ES6 区分了全局变量和全局对象
但为了兼容，var 声明的全局变量依然在全局对象上，let、const、class声明的全局变量不在全局对象上
```



### 3.4 数据类型

5种简单数据类型（基本数据类型）：undefined、Null、Boolean、Number、String

1种复杂数据类型（引用数据类型）：Object

> 在 ECMAScript ，Array、function都是Object

#### 3.4.1 typeof 操作符

使用 typeof操作符 可以判断变量的数据类型，有以下结果：

```javascript
'undefined' // 值未定义
'boolean' // 布尔值
'string' // 字符串
'number' // 数值
'object' // 对象或null
'function' // 函数
```

typeof 的精细度有限，想要更加精准的结果，可以使用 toString

```javascript
Object.prototype.toString.call(null) // "[object Null]"
```

返回的字符串是 "[object 实际数据类型]"

#### 3.4.2 Undefined 类型

Undefined类型只有一个特殊值：undefined。未初始化的变量、无返回值的函数的结果的值都是 undefined

#### 3.4.3 Null 类型

Null 类型也只有一个特殊值：null。

```
null 值表示一个空对象指针，所以 typeof 操作符检测它才会返回 "object"
```

#### 3.4.4 Boolean 类型

Boolean 类型只有两个值：true 和 false。

可以对任何数据类型的值调用 Boolean() 函数，而且总会返回一个 Boolean 值。下表列出各数据类型转换规则：

| 数据类型  | 转换为 true 的值             | 转换为 false 的值 |
| --------- | ---------------------------- | ----------------- |
| Boolean   | true                         | false             |
| String    | 任何非空字符串               | ""（空字符串）    |
| Number    | 任何非零数字值（包括无穷大） | 0 和 NaN          |
| Object    | 任何对象                     | null              |
| Undefined | n/a （不适用）               | undefined         |

#### 3.4.5 Number 类型

Number 类型使用 IEEE754 格式表示整数和浮点数值（浮点数也叫双精度数值）。

科学计数法：31250000 -> 3.125e7（即3.125 * 10^7）

浮点数的最高精度是 **17位**，进行计算时其舍入误差（数值转换为计算机可识别的二进制时精度丢失）会导致结果不精准。比如：

```
0.1 + 0.2; // 0.30000000000000004
0.1+0.7; // 0.7999999999999999
```

这个计算误差是基于 IEEE754 数值的浮点计算的通病，并非只有 JavaScript一家。所以永远不要测试某个特定的浮点数值。

```javascript
// IEEE754 这一数据类型能够安全存储 -(2^53 - 1) 到 2^53 - 1 之间的数值（包含边界值）
Number.MAX_SAFE_INTEGER //  2^53 - 1，9007199254740991，长度16位
Number.MIN_SAFE_INTEGER // -(2^53 - 1)，-9007199254740991，长度16位
```

**安全存储**的意思是指能够准确区分两个不相同的值，例如 `Number.MAX_SAFE_INTEGER + 1 === Number.MAX_SAFE_INTEGER + 2` 将得到 true的结果，而这在数学逻辑上是错误的。

```
所以，后端返回 long 类型（这个类型一般会很长）的数据时，切记返回字符串格式
```

**Number.isSafeInteger()** 方法用来判断传入的参数值是否是一个“安全整数”（safe integer）。安全整数是一个符合下面条件的整数：

> 1、可以精确地表示为 IEEE-754 双精度数
>
> 2、其 IEEE-754 表示不能是舍入任何其他整数以适合 IEEE-754 表示的结果

举例

```
比如，2^53 - 1 是一个安全整数，它能被精确表示，在任何 IEEE-754 舍入模式（rounding mode）下，没有其他整数舍入结果为该整数。作为对比，2^53 就不是一个安全整数，它能够使用 IEEE-754 表示，但是 2^53 + 1 不能使用 IEEE-754 直接表示，在就近舍入（round-to-nearest）和向零舍入中，会被舍入为 2^53。
```

ECMAScript 能表示的最大值（Number.MAX_VALUE）、最小值(Number.MIN_VALUE）并不是一个安全整数

在计算中如果超出 最大值和最小值范围，会返回无穷值：Infinity（正无穷）、-Infinity（负无穷）

**NaN**

```
非数值（Not a Number），是一个特殊的数值。用于表示一个本来要返回数值的操作数未返回数值的情况。
1、NaN与任何值操作都返回 NaN
2、NaN与任何值都不相等，包括NaN本身
```

可以通过 isNaN() 函数判断非数值

**数值转换**

规则有很多，常用的是Number()、parseInt()、parseFloat()

```
ES5 的 parseInt() 不能识别八进制，所以增加了一个参数, parseInt(string, radix)。第二个参数 radix 就是制定进制的
```



#### 3.4.6 String 类型

String类型用于表示由零或多个16位Unicode字符组成的字符序列，即字符串。字符串由单引号或双引号表示，在ECMAScript中，这两种表示完全相同（PHP对这两种的表示形式的解释方式不同，有效率差异）

字符串拼接的过程

```javascript
var lang = 'Java';
lang = lang + 'Script';
```

引擎内部实现步骤如下

> 1、创建一个能容纳10个字符的新字符串
>
> 2、在新字符串中填充 "Java" 和 "Script"
>
> 3、销毁原来的字符串 "Java" 和 "Script"

这个过程在某些旧版本的浏览器效率很低下，比如 Firefox1.0、IE6等

**字符串转换**

最简单的拼接方式是用 加号操作符（+""）

```
1、一般是调用数值的 toString()方法
2、null 和 undefined 没有 toString()方法，所以只会返回它们的字面量值
```



#### 3.4.7  Object类型

对象是一组数据和功能的集合。在ECMAScript中， Object类是所有对象的基础，因此所有对象都用于 Object类的基础属性和方法。

```
关于Object类，在第5章和第6章会有详细介绍
```

对 Object类型 进行 运算或比较时，先调用对象的 valueOf() 方法以获取表示该对象的数值，如果该对象没有 valueOf() 方法，则调用 toString()方法将得到的字符串转换为数值。