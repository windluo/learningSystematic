## 箭头函数

### 基本用法

ES6 允许使用“箭头”（`=>`）定义函数。

```js
var f = v => v;

// 等同于
var f = function (v) {
  return v;
};
```

### 注意

箭头函数有几个使用注意点。（箭头函数没有自己的`this`）

（1）函数体内的`this`对象，就是定义时所在的对象，而不是使用时所在的对象。

（2）不可以当作构造函数，也就是说，不可以使用`new`命令，否则会抛出一个错误。

（3）不可以使用`arguments`对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。

（4）不可以使用`yield`命令，因此箭头函数不能用作 Generator 函数。

上面四点中，第一点尤其值得注意。`this`对象的指向是可变的，但是在箭头函数中，它是固定的。

```js
function foo() {
  setTimeout(() => {
    console.log('id:', this.id);
  }, 100);
}

var id = 21;

foo.call({ id: 42 });
// id: 42
```

`setTimeout()` 延时 100ms 执行，如果是普通函数，`this`会最终指向调用它的最近的对象，即全局对象，即`id=21`。

但是因为箭头函数的`this`始终指向它被定义时所在的对象，`foo()` 运行时，箭头函数的`this`指向的是传入的对象`{ id: 42 }`，所以，即使 `setTimeout()`延时执行，箭头函数`this`依然不会改变。所以输出`42`。



